 /*!
 * Extras helper for fancyBox
 * version: 1.0.0 (Mon, 3 Jun 2013)
 * @copyright Martin Kelm, 2013, http://mkelm.github.io
 * @requires fancyBox v2.0 or later
 */
(function(e){var t=e.fancybox,i=function(e,i){var n=parseInt(e,10)||0;return i&&isPercentage(e)&&(n=t.getViewport()[i]/100*n),Math.ceil(n)};t.helpers.extras={defaults:{type:"float",position:"bottom",linkTitle:"Show extras ",linkTitleActive:"Show image",urls:[],content:""},beforeShow:function(n){var a=t.current,o=n.type,s=n.urls;if(void 0!==s[a.index]&&s[a.index].length>0){switch(openLink=e('<div class="fancybox-extras-link fancybox-extras-link-'+o+"-wrap fancybox-extras-link-"+n.position+'"><a href="#">'+n.linkTitle+"</a></div>"),o){case"inside":target=t.skin;break;case"outside":target=t.wrap;break;case"over":target=t.inner;break;default:target=t.skin,openLink.appendTo("body"),t.IE&&description.width(openLink.width()),openLink.wrapInner('<span class="child"></span>'),t.current.margin[2]+=Math.abs(i(openLink.css("margin-bottom")))}openLink["top"===n.position?"prependTo":"appendTo"](target)}},showExtrasContent:function(i){e(".fancybox-skin").children(":not(.fancybox-extras-link, .fancybox-item)").hide(),e(".fancybox-skin").prepend('<div class="fancybox-extras-content">'+i.content+"</div>");var n=i.urls[t.current.index];e(".fancybox-skin .fancybox-extras-content").find('a[href ^= "'+n+'"]').click(function(){return e.get(e(this).attr("href"),function(n){i.content=e(n).children("requested-content").html(),t.helpers.extras.showExtrasContent(i)}),!1}),e(".fancybox-skin .fancybox-extras-content").find('a[href *= "http"]').attr("target","_blank"),e(".fancybox-skin .fancybox-extras-content").find('button[type = "submit"]').click(function(){var n=e(this).parents("form:first");return e.post(e(n).attr("action"),e(n).serialize(),function(n){i.content=e(n).children("requested-content").html(),t.helpers.extras.showExtrasContent(i)}),!1}),e(".fancybox-extras-link a").unbind("click").click(function(){t.helpers.extras.hideExtrasContent(i)}),e(".fancybox-extras-link a").html(i.linkTitleActive)},hideExtrasContent:function(i){e(".fancybox-skin .fancybox-extras-content").hide(),e(".fancybox-skin").children(":not(.fancybox-extras-content)").show(),e(".fancybox-extras-link a").unbind("click").click(function(){t.helpers.extras.showExtrasContent(i)}),e(".fancybox-extras-link a").html(i.linkTitle)},beforeShowExtrasContent:function(i){e.ajax({url:i.urls[t.current.index]}).done(function(n){i.content=e(n).children("requested-content").html(),t.helpers.extras.showExtrasContent(i)})},afterShow:function(i){e(".fancybox-extras-link a").click(function(){t.helpers.extras.beforeShowExtrasContent(i)})}}})(jQuery);