 /*!
 * Extras helper for fancyBox
 * version: 1.0.3 (Wed, 12 Jun 2013)
 * @copyright Martin Kelm, 2013, http://mkelm.github.io
 * @requires fancyBox v2.0 or later
 */
(function($){var F=$.fancybox,getScalar=function(e,t){var i=parseInt(e,10)||0;return t&&isPercentage(e)&&(i=F.getViewport()[t]/100*i),Math.ceil(i)};F.helpers.extras={defaults:{type:"float",position:"bottom",linkTitle:"Show extras ",linkTitleActive:"Show image",urls:[],content:"",executeOnLoad:[]},beforeShow:function(e){var t=F.current,i=e.type,n=e.urls;if(void 0!==n[t.index]&&n[t.index].length>0){switch(openLink=$('<div class="fancybox-extras-link fancybox-extras-link-'+i+"-wrap fancybox-extras-link-"+e.position+'"><a href="#">'+e.linkTitle+"</a></div>"),i){case"inside":target=F.skin;break;case"outside":target=F.wrap;break;case"over":target=F.inner;break;default:target=F.skin,openLink.appendTo("body"),F.IE&&description.width(openLink.width()),openLink.wrapInner('<span class="child"></span>'),F.current.margin[2]+=Math.abs(getScalar(openLink.css("margin-bottom")))}openLink["top"===e.position?"prependTo":"appendTo"](target)}},showExtrasContent:function(opts){$(".fancybox-skin").children(":not(.fancybox-extras-link, .fancybox-item)").hide(),$(".fancybox-skin").prepend('<div class="fancybox-extras-content">'+opts.content+"</div>");var currentUrl=opts.urls[F.current.index];if($(".fancybox-skin .fancybox-extras-content").find('a[href ^= "'+currentUrl+'"]').click(function(){return $.get($(this).attr("href"),function(e){opts.content=$(e).children("requested-content").html(),F.helpers.extras.showExtrasContent(opts)}),!1}),$(".fancybox-skin .fancybox-extras-content").find('a[href *= "http"]').attr("target","_blank"),$(".fancybox-skin .fancybox-extras-content").find('button[type = "submit"]').click(function(){var e=$(this).parents("form:first");return $.post($(e).attr("action"),$(e).serialize(),function(e){opts.content=$(e).children("requested-content").html(),F.helpers.extras.showExtrasContent(opts)}),!1}),$(".fancybox-extras-link a").unbind("click").click(function(){F.helpers.extras.hideExtrasContent(opts)}),$(".fancybox-extras-link a").html(opts.linkTitleActive),opts.executeOnLoad.length>0)for(var i=0;opts.executeOnLoad.length>i;i++)eval(opts.executeOnLoad[i]+";")},hideExtrasContent:function(e){$(".fancybox-skin .fancybox-extras-content").hide(),$(".fancybox-skin").children(":not(.fancybox-extras-content)").show(),$(".fancybox-extras-link a").unbind("click").click(function(){F.helpers.extras.showExtrasContent(e)}),$(".fancybox-extras-link a").html(e.linkTitle)},beforeShowExtrasContent:function(e){$.ajax({url:e.urls[F.current.index]}).done(function(t){e.content=$(t).children("requested-content").html(),F.helpers.extras.showExtrasContent(e)})},afterShow:function(e){$(".fancybox-extras-link a").click(function(){F.helpers.extras.beforeShowExtrasContent(e)})}}})(jQuery);